(this["webpackJsonpinstagram-clone"]=this["webpackJsonpinstagram-clone"]||[]).push([[0],{43:function(e,t,a){e.exports=a(65)},48:function(e,t,a){},49:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(13),o=a.n(r),s=a(10),l=(a(48),a(49),a(92)),m=a(18),i=a.n(m),u=i.a.initializeApp({apiKey:"AIzaSyCMC44a55DIqrivZqzaNbET_mVH3VNTuo8",authDomain:"instagram-clone-c7549.firebaseapp.com",databaseURL:"https://instagram-clone-c7549.firebaseio.com",projectId:"instagram-clone-c7549",storageBucket:"instagram-clone-c7549.appspot.com",messagingSenderId:"511891882338",appId:"1:511891882338:web:d6151a81b4a7dbac1f2c3b",measurementId:"G-GGSGXM95JE"}).firestore(),p=i.a.auth(),d=i.a.storage();var g=function(e){var t=e.imageUrl,a=e.username,r=e.caption,o=e.postId,m=e.user,p=Object(n.useState)([]),d=Object(s.a)(p,2),g=d[0],f=d[1],b=Object(n.useState)(""),E=Object(s.a)(b,2),v=E[0],h=E[1];return Object(n.useEffect)((function(){var e;return o&&(e=u.collection("posts").doc(o).collection("comments").orderBy("timestamp","desc").onSnapshot((function(e){f(e.docs.map((function(e){return e.data()})))}))),function(){e()}}),[o]),c.a.createElement("div",{className:"post"},c.a.createElement("div",{className:"post__heading"},c.a.createElement(l.a,{src:"",alt:"Rana",className:"post__avatar"}),c.a.createElement("h3",{className:"username"},a)),c.a.createElement("img",{className:"post__image",src:t,alt:""}),c.a.createElement("p",{className:"post__text"},c.a.createElement("strong",null,a),": ",r),c.a.createElement("div",{className:"post__comments"},g.map((function(e){return c.a.createElement("p",{className:"all__comments"},c.a.createElement("strong",null,e.username)," ",e.text)}))),m&&c.a.createElement("form",{className:"post__commentBox"},c.a.createElement("input",{className:"post__comment",type:"text",placeholder:"Add a comment",value:v,onChange:function(e){return h(e.target.value)}}),c.a.createElement("button",{disabled:!v,className:"comment__button",type:"submit",onClick:function(e){e.preventDefault(),u.collection("posts").doc(o).collection("comments").add({text:v,username:m.displayName,timestamp:i.a.firestore.FieldValue.serverTimestamp()}),h("")}},"Post")))},f=a(89),b=a(88),E=a(91),v=a(90);a(64);var h=function(e){var t=e.username,a=Object(n.useState)(""),r=Object(s.a)(a,2),o=r[0],l=r[1],m=Object(n.useState)(null),p=Object(s.a)(m,2),g=p[0],f=p[1],b=Object(n.useState)(0),E=Object(s.a)(b,2),h=E[0],_=E[1];return c.a.createElement("div",{class:"image__upload"},c.a.createElement("progress",{value:h,max:"100",className:"progress"}),c.a.createElement("input",{type:"text",placeholder:"enter a caption",onChange:function(e){return l(e.target.value)},value:o}),c.a.createElement("input",{type:"file",onChange:function(e){e.target.files[0]&&f(e.target.files[0])}}),c.a.createElement(v.a,{onClick:function(){d.ref("images/".concat(g.name)).put(g).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);_(t)}),(function(e){console.log(e.message)}),(function(){d.ref("images").child(g.name).getDownloadURL().then((function(e){u.collection("posts").add({timestamp:i.a.firestore.FieldValue.serverTimestamp(),caption:o,imageUrl:e,username:t}),_(0),l(""),f(null)}))}))},disabled:!g},"Upload"))};function _(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var j=Object(b.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var N=function(){var e=j(),t=Object(n.useState)(_),a=Object(s.a)(t,1)[0],r=Object(n.useState)([]),o=Object(s.a)(r,2),l=o[0],m=o[1],i=Object(n.useState)(!1),d=Object(s.a)(i,2),b=d[0],N=d[1],O=Object(n.useState)(""),y=Object(s.a)(O,2),S=y[0],C=y[1],w=Object(n.useState)(""),I=Object(s.a)(w,2),k=I[0],x=I[1],U=Object(n.useState)(""),A=Object(s.a)(U,2),B=A[0],D=A[1],T=Object(n.useState)(null),G=Object(s.a)(T,2),P=G[0],V=G[1],z=Object(n.useState)(!1),J=Object(s.a)(z,2),L=J[0],M=J[1];return Object(n.useEffect)((function(){var e=p.onAuthStateChanged((function(e){e?(console.log(e),V(e)):V(null)}));return function(){e()}}),[P,S]),Object(n.useEffect)((function(){u.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){m(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[l]),c.a.createElement("div",{className:"app"},c.a.createElement(f.a,{open:b,onClose:function(){return N(!1)}},c.a.createElement("div",{style:a,className:e.paper},c.a.createElement("form",{className:"app__signup"},c.a.createElement("center",null,c.a.createElement("img",{className:"app__headerImage",src:"https://cdn.worldvectorlogo.com/logos/instagram-1.svg",alt:"image"})),c.a.createElement(E.a,{placeholder:"username",type:"text",value:S,onChange:function(e){return C(e.target.value)}}),c.a.createElement(E.a,{placeholder:"email",type:"text",value:k,onChange:function(e){return x(e.target.value)}}),c.a.createElement(E.a,{placeholder:"password",type:"password",value:B,onChange:function(e){return D(e.target.value)}}),c.a.createElement(v.a,{type:"submit",onClick:function(e){e.preventDefault(),p.createUserWithEmailAndPassword(k,B).then((function(e){return e.user.updateProfile({displayName:S})})).catch((function(e){return alert(e.message)})),N(!1)}},"Sign Up")))),c.a.createElement(f.a,{open:L,onClose:function(){return M(!1)}},c.a.createElement("div",{style:a,className:e.paper},c.a.createElement("form",{className:"app__signup"},c.a.createElement("center",null,c.a.createElement("img",{className:"app__headerImage",src:"https://cdn.worldvectorlogo.com/logos/instagram-1.svg",alt:"image"})),c.a.createElement(E.a,{placeholder:"email",type:"text",value:k,onChange:function(e){return x(e.target.value)}}),c.a.createElement(E.a,{placeholder:"password",type:"password",value:B,onChange:function(e){return D(e.target.value)}}),c.a.createElement(v.a,{type:"submit",onClick:function(e){e.preventDefault(),p.signInWithEmailAndPassword(k,B).catch((function(e){return alert(e.message)})),M(!1)}},"Sign In")))),c.a.createElement("div",{className:"app__header"},c.a.createElement("img",{src:"https://cdn.worldvectorlogo.com/logos/instagram-1.svg",alt:"image"}),P?c.a.createElement(v.a,{className:"btn",onClick:function(){return p.signOut()}},"Logout"):c.a.createElement("div",{className:"sign__container"},c.a.createElement(v.a,{className:"btn",onClick:function(){return M(!0)}},"Sign In"),c.a.createElement(v.a,{className:"btn",onClick:function(){return N(!0)}},"Sign up"))),c.a.createElement("div",{className:"app__post"},l.map((function(e){var t=e.id,a=e.post;return c.a.createElement(g,{postId:t,user:P,key:t,username:a.username,imageUrl:a.imageUrl,caption:a.caption})}))),(null===P||void 0===P?void 0:P.displayName)?c.a.createElement(h,{username:P.displayName}):c.a.createElement("h3",null,"Sorry You need to log in to upload files"))};o.a.render(c.a.createElement(N,null),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.3de792f4.chunk.js.map